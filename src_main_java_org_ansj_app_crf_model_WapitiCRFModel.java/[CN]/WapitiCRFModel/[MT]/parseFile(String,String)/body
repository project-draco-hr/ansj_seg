{
  BufferedReader reader=IOUtil.getReader(path,IOUtil.UTF8);
  statusMap=new HashMap<String,Integer>();
  String content=IOUtil.getContent(IOUtil.getReader(templatePath,IOUtil.UTF8));
  this.template=Template.parse(content);
  myGrad=new HashMap<String,Feature>();
  String temp=null;
  List<String> statusLines=new ArrayList<String>();
  while ((temp=reader.readLine()) != null) {
    if (StringUtil.isNotBlank(temp) && temp.charAt(0) == 'b') {
      statusLines.add(temp);
    }
  }
  for (  String str : statusLines) {
    String[] split=str.split("\t");
    addStatus(split[1]);
    addStatus(split[2]);
  }
  this.template.tagNum=tagNum;
  status=new double[tagNum][tagNum];
  for (  String str : statusLines) {
    String[] split=str.split("\t");
    status[statusMap.get(split[1])][statusMap.get(split[2])]=Double.parseDouble(split[3]);
  }
  status[statusMap.get("S")][statusMap.get("E")]=Double.MIN_VALUE;
  status[statusMap.get("S")][statusMap.get("M")]=Double.MIN_VALUE;
  status[statusMap.get("B")][statusMap.get("B")]=Double.MIN_VALUE;
  status[statusMap.get("B")][statusMap.get("S")]=Double.MIN_VALUE;
  status[statusMap.get("M")][statusMap.get("S")]=Double.MIN_VALUE;
  status[statusMap.get("M")][statusMap.get("B")]=Double.MIN_VALUE;
  status[statusMap.get("E")][statusMap.get("M")]=Double.MIN_VALUE;
  status[statusMap.get("E")][statusMap.get("E")]=Double.MIN_VALUE;
  IOUtil.close(reader);
  reader=IOUtil.getReader(path,IOUtil.UTF8);
  while ((temp=reader.readLine()) != null) {
    if (StringUtil.isNotBlank(temp) && temp.charAt(0) == 'u') {
      parseGrad(temp,template.ft.length);
    }
    if (maxSize > 0 && myGrad.size() > maxSize) {
      break;
    }
  }
  IOUtil.close(reader);
  this.template.statusMap=statusMap;
}
