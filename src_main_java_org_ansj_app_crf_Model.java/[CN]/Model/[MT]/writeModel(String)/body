{
  ObjectOutputStream oos=null;
  try {
    oos=new ObjectOutputStream(new GZIPOutputStream(new FileOutputStream(new File(path))));
    oos.writeUTF(CRFModel.version);
    oos.writeObject(status);
    oos.writeObject(config.getTemplate());
    Map<String,float[]> map=featureTree.toMap();
    MapCount<Integer> mc=new MapCount<Integer>();
    for (    float[] v : map.values()) {
      mc.add(v.length);
    }
    for (    Entry<Integer,Double> entry : mc.get().entrySet()) {
      int win=entry.getKey();
      oos.writeInt(win);
      oos.writeInt(entry.getValue().intValue());
      for (      Entry<String,float[]> e : map.entrySet()) {
        if (e.getValue().length == win) {
          oos.writeUTF(e.getKey());
          float[] value=e.getValue();
          for (int i=0; i < win; i++) {
            oos.writeFloat(value[i]);
          }
        }
      }
    }
    oos.writeInt(0);
    oos.writeInt(0);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
 finally {
    if (oos != null) {
      oos.flush();
      oos.close();
    }
  }
}
