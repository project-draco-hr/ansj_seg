{
  InputStream is=null;
  try {
    is=IOUtil.getInputStream(modelPath);
    byte[] bytes=new byte[100];
    is.read(bytes);
    Model model=new CRFModel(name);
    if (model.checkModel(bytes)) {
      model.loadModel(modelPath);
      return model;
    }
    model=new CRFppTxtModel(name);
    if (model.checkModel(bytes)) {
      model.loadModel(modelPath);
      return model;
    }
    model=new WapitiCRFModel(name);
    if (model.checkModel(bytes)) {
      model.loadModel(modelPath);
      return model;
    }
  }
  finally {
    if (is != null) {
      is.close();
    }
  }
  throw new Exception("I did not know waht type of model by file " + modelPath);
}
