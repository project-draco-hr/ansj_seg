{
  File zipFile=new File(zipFilePath);
  if (includeZipFileName) {
    String fileName=zipFile.getName();
    if (StringUtil.isBlank(fileName)) {
      fileName=fileName.substring(0,fileName.lastIndexOf("."));
    }
    unzipFilePath=unzipFilePath + File.separator + fileName;
  }
  File unzipFileDir=new File(unzipFilePath);
  if (!unzipFileDir.exists() || !unzipFileDir.isDirectory()) {
    unzipFileDir.mkdirs();
  }
  ZipEntry entry=null;
  String entryFilePath=null, entryDirPath=null;
  File entryFile=null, entryDir=null;
  int index=0, count=0, bufferSize=1024;
  byte[] buffer=new byte[bufferSize];
  BufferedInputStream bis=null;
  BufferedOutputStream bos=null;
  ZipFile zip=new ZipFile(zipFile);
  Enumeration<ZipEntry> entries=(Enumeration<ZipEntry>)zip.entries();
  while (entries.hasMoreElements()) {
    entry=entries.nextElement();
    entryFilePath=unzipFilePath + File.separator + entry.getName();
    index=entryFilePath.lastIndexOf(File.separator);
    if (index != -1) {
      entryDirPath=entryFilePath.substring(0,index);
    }
 else {
      entryDirPath="";
    }
    entryDir=new File(entryDirPath);
    if (!entryDir.exists() || !entryDir.isDirectory()) {
      entryDir.mkdirs();
    }
    entryFile=new File(entryFilePath);
    if (entryFile.isDirectory()) {
      continue;
    }
    if (entryFile.exists()) {
      System.err.println(entryFile.getAbsolutePath() + " has in ! so skip it!");
      continue;
    }
    System.out.println("to wirte file " + entryFile.getAbsolutePath());
    bos=new BufferedOutputStream(new FileOutputStream(entryFile));
    bis=new BufferedInputStream(zip.getInputStream(entry));
    while ((count=bis.read(buffer,0,bufferSize)) != -1) {
      bos.write(buffer,0,count);
    }
    bos.flush();
    bos.close();
  }
}
