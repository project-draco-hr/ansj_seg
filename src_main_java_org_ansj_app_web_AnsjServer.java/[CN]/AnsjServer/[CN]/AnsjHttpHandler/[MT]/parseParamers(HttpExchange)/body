{
  BufferedReader reader=null;
  try {
    Map<String,String> parameters=new HashMap<String,String>();
    URI requestedUri=httpExchange.getRequestURI();
    String query=requestedUri.getRawQuery();
    parseQuery(query,parameters);
    reader=IOUtil.getReader(httpExchange.getRequestBody(),FILE_ENCODING);
    query=IOUtil.getContent(reader).trim();
    parseQuery(query,parameters);
    httpExchange.setAttribute("parameters",parameters);
    return parameters;
  }
  finally {
    if (reader != null) {
      reader.close();
    }
  }
}
