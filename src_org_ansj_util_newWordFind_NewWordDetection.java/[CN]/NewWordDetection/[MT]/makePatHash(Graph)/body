{
  PatHashMap pt=new PatHashMap();
  List<Term> tempList=new ArrayList<Term>();
  for (  Term term : graph.terms) {
    if (term == null) {
      continue;
    }
    if (filter(term)) {
      tempList.add(term);
    }
 else {
      if (tempList.size() > 1) {
        pt.addList(tempList);
      }
      if (tempList.size() > 0) {
        if (tempList.size() < 10) {
          tempList.clear();
        }
 else {
          tempList=new ArrayList<Term>();
        }
      }
    }
  }
  return pt;
}
